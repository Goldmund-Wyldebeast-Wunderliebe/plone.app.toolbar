/**
 * almond 0.1.1 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

// Patterns 
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js
//
// Description: 
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/**
 * jQuery TextExt Plugin
 * http://textextjs.com
 *
 * @version 1.3.1
 * @copyright Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 * @license MIT License
 */

/**
 * jQuery TextExt Plugin
 * http://alexgorbatchev.com/textext
 *
 * @version 1.3.1
 * @copyright Copyright (C) 2011 Alex Gorbatchev. All rights reserved.
 * @license MIT License
 */

// plone integration for textext.
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends:
//    ++resource++plone.app.jquery.js
//    ++resource++plone.app.widgets/textext.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*!
 * pickadate.js v2.0.6 - 20 January, 2013
 * By Amsul (http://amsul.ca)
 * Hosted on https://github.com/amsul/pickadate.js
 * Licensed under MIT ("expat" flavour) license.
 */

// plone integration for pickadate.
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js patterns.js pickadate.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/* ===================================================
 * bootstrap-transition.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ========================================================
 * bootstrap-tab.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */

// tabs pattern.
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js patterns.js bootstrap-transition.js bootstrap-tab.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

// tabs pattern.
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js patterns.js pattern.tabs.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

// This plugin is used to handle all clicks inside iframe.
//
// @author Rok Garbas
// @version 1.0
// @licstart  The following is the entire license notice for the JavaScript
//            code in this page.
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//
// @licend  The above is the entire license notice for the JavaScript code in
//          this page.
//

// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
//
// Description:
//    plone.toolbar.js script makes sure that all dropdowns in Plone's toolbar
//    are in sync with iframe's stretching/schrinking.
// 
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*!
 * jQuery Form Plugin
 * version: 3.25.0-2013.01.18
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */

/* =========================================================
 * bootstrap-modal.js v2.2.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
//
// Description:
//    This script is used to provide glue code between iframe and twitter
//    bootstrap modal. And also providing some convinience method for usage in
//    Plone.
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

// This script will register Plone's overlays for toolbar actions.
//
// @licstart  The following is the entire license notice for the JavaScript
//            code in this page.
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//
// @licend  The above is the entire license notice for the JavaScript code in
//          this page.
//

var requirejs,require,define;(function(e){function a(e,t){var n=t&&t.split("/"),i=r.map,s=i&&i["*"]||{},o,u,a,f,l,c,h;if(e&&e.charAt(0)==="."&&t){n=n.slice(0,n.length-1),e=n.concat(e.split("/"));for(l=0;h=e[l];l++)if(h===".")e.splice(l,1),l-=1;else if(h===".."){if(l===1&&(e[2]===".."||e[0]===".."))return!0;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((n||s)&&i){o=e.split("/");for(l=o.length;l>0;l-=1){u=o.slice(0,l).join("/");if(n)for(c=n.length;c>0;c-=1){a=i[n.slice(0,c).join("/")];if(a){a=a[u];if(a){f=a;break}}}f=f||s[u];if(f){o.splice(0,l,f),e=o.join("/");break}}}return e}function f(t,n){return function(){return u.apply(e,s.call(arguments,0).concat([t,n]))}}function l(e){return function(t){return a(t,e)}}function c(e){return function(n){t[e]=n}}function h(r){if(n.hasOwnProperty(r)){var s=n[r];delete n[r],i[r]=!0,o.apply(e,s)}if(!t.hasOwnProperty(r))throw new Error("No "+r);return t[r]}function p(e,t){var n,r,i=e.indexOf("!");return i!==-1?(n=a(e.slice(0,i),t),e=e.slice(i+1),r=h(n),r&&r.normalize?e=r.normalize(e,l(t)):e=a(e,t)):e=a(e,t),{f:n?n+"!"+e:e,n:e,p:r}}function d(e){return function(){return r&&r.config&&r.config[e]||{}}}var t={},n={},r={},i={},s=[].slice,o,u;o=function(r,s,o,u){var a=[],l,v,m,g,y,b;u=u||r;if(typeof o=="function"){s=!s.length&&o.length?["require","exports","module"]:s;for(b=0;b<s.length;b++){y=p(s[b],u),m=y.f;if(m==="require")a[b]=f(r);else if(m==="exports")a[b]=t[r]={},l=!0;else if(m==="module")v=a[b]={id:r,uri:"",exports:t[r],config:d(r)};else if(t.hasOwnProperty(m)||n.hasOwnProperty(m))a[b]=h(m);else if(y.p)y.p.load(y.n,f(u,!0),c(m),{}),a[b]=t[m];else if(!i[m])throw new Error(r+" missing "+m)}g=o.apply(t[r],a);if(r)if(v&&v.exports!==e&&v.exports!==t[r])t[r]=v.exports;else if(g!==e||!l)t[r]=g}else r&&(t[r]=o)},requirejs=require=u=function(t,n,i,s){return typeof t=="string"?h(p(t,n).f):(t.splice||(r=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},s?o(e,t,n,i):setTimeout(function(){o(e,t,n,i)},15),u)},u.config=function(e){return r=e,u},define=function(e,t,r){t.splice||(r=t,t=[]),n[e]=[e,t,r]},define.amd={jQuery:!0}})(),define("requireLib",function(){}),define("js/patterns",["jquery"],function(e,t){function i(t,n,r){return r=r||{},t.size()!==0&&!e.nodeName(t[0],"body")&&(r=i(t.parent(),n,r)),t.length&&e.each(t[0].attributes,function(t,i){i.name.substr(0,("data-"+n).length)==="data-"+n&&(i.value==="true"?r[e.camelCase(i.name.substr(("data-"+n).length+1))]=!0:i.value==="false"?r[e.camelCase(i.name.substr(("data-"+n).length+1))]=!1:r[e.camelCase(i.name.substr(("data-"+n).length+1))]=i.value)}),r}function s(e,t,n){var s=new r[t](e,i(e,t,n));return s}function o(n){e.each((n.data("pattern")||"").split(" "),function(e,i){if(i.length!==0){if(r[i]===t)return;typeof n.data("pattern-"+i)!="object"&&n.data("pattern-"+i,s(n,i))}})}function u(t){e(t)[0]!==e(document)[0]&&o(e(t)),e("[data-pattern]",t).each(function(){o(e(this))})}function a(n){if(!n.prototype.name)return;if(r[n.prototype.name]!==t)return;r[n.prototype.name]=n,n.prototype.jqueryPlugin&&(e.fn[n.prototype.jqueryPlugin]=function(r,i){return e(this).each(function(){var o=e(this),u=o.data("pattern-"+n.prototype.name);typeof r=="object"&&(i=r,r=t);if(!u||typeof u=="string")u=s(o,n.prototype.name,i),o.data("pattern-"+n.prototype.name,u);r&&typeof r=="string"&&u&&u[r]&&u[r].apply(u,[i])}),this},e.fn[n.prototype.jqueryPlugin].Constructor=n.constructor)}var n=e.error,r={},f=function(e,t){this.$el=e.addClass("pattern-"+this.name),this.options=t,this.init&&this.init()};return f.prototype={constructor:f},f.extend=function(t){var n=this,r;t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){n.apply(this,arguments)};var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e.extend(!0,r.prototype,t),r.__super__=n.prototype,r},window.Patterns={_registry:r,initialize:u,register:a,getOptions:i,Base:f},window.Patterns}),function(e,t){function n(){}function r(){}function i(){}function x(e,t){typeof t=="string"&&(t=t.split("."));var n=t.join(".").replace(/\.(\w)/g,function(e,t){return t.toUpperCase()}),r=t.shift(),i;return typeof (i=e[n])!=a?i=i:typeof (i=e[r])!=a&&t.length>0&&(i=x(i,t)),i}function T(){function i(e,r){n.bind(e,function(){return r.apply(t,arguments)})}var e=o.apply(arguments),t=this,n=e.length===1?t:e.shift(),r;e=e[0]||{};for(r in e)i(r,e[r])}function N(e,t){return{input:e,form:t}}var s=(JSON||{}).stringify,o=Array.prototype.slice,u,a="undefined",f="item.manager",l="plugins",c="ext",h="html.wrap",p="html.hidden",d="keys",v="preInvalidate",m="postInvalidate",g="getFormData",y="setFormData",b="setInputData",w="postInit",E="ready",S={itemManager:r,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!s)throw new Error("JSON.stringify() not found");u=r.prototype,u.init=function(e){},u.filter=function(e,t){var n=[],r,i;for(r=0;r<e.length;r++)i=e[r],this.itemContains(i,t)&&n.push(i);return n},u.itemContains=function(e,t){return this.itemToString(e).toLowerCase().indexOf(t.toLowerCase())==0},u.stringToItem=function(e){return e},u.itemToString=function(e){return e},u.compareItems=function(e,t){return e==t},u=n.prototype,u.init=function(t,n){var r=this,i,s,o;r._defaults=e.extend({},S),r._opts=n||{},r._plugins={},r._itemManager=s=new(r.opts(f)),t=e(t),o=e(r.opts(h)),i=e(r.opts(p)),t.wrap(o).keydown(function(e){return r.onKeyDown(e)}).keyup(function(e){return r.onKeyUp(e)}).data("textext",r),e(r).data({hiddenInput:i,wrapElement:t.parents(".text-wrap").first(),input:t}),i.attr("name",t.attr("name")),t.attr("name",null),i.insertAfter(t),e.extend(!0,s,r.opts(c+".item.manager")),e.extend(!0,r,r.opts(c+".*"),r.opts(c+".core")),r.originalWidth=t.outerWidth(),r.invalidateBounds(),s.init(r),r.initPatches(),r.initPlugins(r.opts(l),e.fn.textext.plugins),r.on({setFormData:r.onSetFormData,getFormData:r.onGetFormData,setInputData:r.onSetInputData,anyKeyUp:r.onAnyKeyUp}),r.trigger(w),r.trigger(E),r.getFormData(0)},u.initPatches=function(){var t=[],n=e.fn.textext.patches,r;for(r in n)t.push(r);this.initPlugins(t,n)},u.initPlugins=function(t,n){var r=this,i,s,o,u=[],a;typeof t=="string"&&(t=t.split(/\s*,\s*|\s+/g));for(a=0;a<t.length;a++)s=t[a],o=n[s],o&&(r._plugins[s]=o=new o,r[s]=function(e){return function(){return e}}(o),u.push(o),e.extend(!0,o,r.opts(c+".*"),r.opts(c+"."+s)));u.sort(function(e,t){return e=e.initPriority(),t=t.initPriority(),e===t?0:e<t?1:-1});for(a=0;a<u.length;a++)u[a].init(r)},u.hasPlugin=function(e){return!!this._plugins[e]},u.on=T,u.bind=function(e,t){this.input().bind(e,t)},u.trigger=function(){var e=arguments;this.input().trigger(e[0],o.call(e,1))},u.itemManager=function(){return this._itemManager},u.input=function(){return e(this).data("input")},u.opts=function(e){var t=x(this._opts,e);return typeof t=="undefined"?x(this._defaults,e):t},u.wrapElement=function(){return e(this).data("wrapElement")},u.invalidateBounds=function(){var e=this,t=e.input(),n=e.wrapElement(),r=n.parent(),i=e.originalWidth+"px",s;e.trigger(v),s=t.outerHeight()+"px",t.css({width:i}),n.css({width:i,height:s}),r.css({height:s}),e.trigger(m)},u.focusInput=function(){this.input()[0].focus()},u.serializeData=s,u.hiddenInput=function(t){return e(this).data("hiddenInput")},u.getWeightedEventResponse=function(e,t){var n=this,r={},i=0;n.trigger(e,r,t);for(var s in r)i=Math.max(i,s);return r[i]},u.getFormData=function(e){var t=this,n=t.getWeightedEventResponse(g,e||0);t.trigger(y,n.form),t.trigger(b,n.input)},u.onAnyKeyUp=function(e,t){this.getFormData(t)},u.onSetInputData=function(e,t){this.input().val(t)},u.onSetFormData=function(e,t){var n=this;n.hiddenInput().val(n.serializeData(t))},u.onGetFormData=function(e,t){var n=this.input().val();t[0]=N(n,n)},e(["Down","Up"]).each(function(){var e=this.toString();u["onKey"+e]=function(t){var n=this,r=n.opts(d)[t.keyCode],i=!0;return r&&(i=r.substr(-1)!="!",r=r.replace("!",""),n.trigger(r+"Key"+e),e=="Up"&&n._lastKeyDown==t.keyCode&&(n._lastKeyDown=null,n.trigger(r+"KeyPress")),e=="Down"&&(n._lastKeyDown=t.keyCode)),n.trigger("anyKey"+e,t.keyCode),i}}),u=i.prototype,u.on=T,u.formDataObject=N,u.init=function(e){throw new Error("Not implemented")},u.baseInit=function(t,n){var r=this;t._defaults=e.extend(!0,t._defaults,n),r._core=t,r._timers={}},u.startTimer=function(e,t,n){var r=this;r.stopTimer(e),r._timers[e]=setTimeout(function(){delete r._timers[e],n.apply(r)},t*1e3)},u.stopTimer=function(e){clearTimeout(this._timers[e])},u.core=function(){return this._core},u.opts=function(e){return this.core().opts(e)},u.itemManager=function(){return this.core().itemManager()},u.input=function(){return this.core().input()},u.val=function(e){var t=this.input();if(typeof e===a)return t.val();t.val(e)},u.trigger=function(){var e=this.core();e.trigger.apply(e,arguments)},u.bind=function(e,t){this.core().bind(e,t)},u.initPriority=function(){return 0};var C=!1,k=e.fn.textext=function(t){var r;return!C&&(r=e.fn.textext.css)!=null&&(e("head").append("<style>"+r+"</style>"),C=!0),this.map(function(){var r=e(this);if(t==null)return r.data("textext");var i=new n;return i.init(r,t),r.data("textext",i),i.input()[0]})};k.addPlugin=function(e,t){k.plugins[e]=t,t.prototype=new k.TextExtPlugin},k.addPatch=function(e,t){k.patches[e]=t,t.prototype=new k.TextExtPlugin},k.TextExt=n,k.TextExtPlugin=i,k.ItemManager=r,k.plugins={},k.patches={}}(jQuery),function(e){function t(){}e.fn.textext.TextExtIE9Patches=t,e.fn.textext.addPatch("ie9",t);var n=t.prototype;n.init=function(e){if(navigator.userAgent.indexOf("MSIE 9")==-1)return;var t=this;e.on({postInvalidate:t.onPostInvalidate})},n.onPostInvalidate=function(){var e=this,t=e.input(),n=t.val();t.val(Math.random()),t.val(n)}}(jQuery),define("jam/jquery-textext/src/js/textext.core.js",function(){}),function(e){function t(){}e.fn.textext.TextExtAjax=t,e.fn.textext.addPlugin("ajax",t);var n=t.prototype,r="ajax.data.callback",i="ajax.cache.results",s="ajax.loading.delay",o="ajax.loading.message",u="ajax.type.delay",a="setSuggestions",f="showDropdown",l="loading",c={ajax:{typeDelay:.5,loadingMessage:"Loading...",loadingDelay:.5,cacheResults:!1,dataCallback:null}};n.init=function(e){var t=this;t.baseInit(e,c),t.on({getSuggestions:t.onGetSuggestions}),t._suggestions=null},n.load=function(t){var n=this,i=n.opts(r)||function(e){return{q:e}},s;s=e.extend(!0,{data:i(t),success:function(e){n.onComplete(e,t)},error:function(e,n){console.error(n,t)}},n.opts("ajax")),e.ajax(s)},n.onComplete=function(e,t){var n=this,r=e;n.dontShowLoading(),n.opts(i)==1&&(n._suggestions=e,r=n.itemManager().filter(e,t)),n.trigger(a,{result:r})},n.dontShowLoading=function(){this.stopTimer(l)},n.showLoading=function(){var e=this;e.dontShowLoading(),e.startTimer(l,e.opts(s),function(){e.trigger(f,function(t){t.clearItems();var n=t.addDropdownItem(e.opts(o));n.addClass("text-loading")})})},n.onGetSuggestions=function(e,t){var n=this,r=n._suggestions,s=(t||{}).query||"";if(r&&n.opts(i)===!0)return n.onComplete(r,s);n.startTimer("ajax",n.opts(u),function(){n.showLoading(),n.load(s)})}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.ajax.js",function(){}),function(e){function t(){}e.fn.textext.TextExtArrow=t,e.fn.textext.addPlugin("arrow",t);var n=t.prototype,r="html.arrow",i={html:{arrow:'<div class="text-arrow"/>'}};n.init=function(t){var n=this,s;n.baseInit(t,i),n._arrow=s=e(n.opts(r)),n.core().wrapElement().append(s),s.bind("click",function(e){n.onArrowClick(e)})},n.onArrowClick=function(e){this.trigger("toggleDropdown"),this.core().focusInput()}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.arrow.js",function(){}),function(e){function t(){}e.fn.textext.TextExtAutocomplete=t,e.fn.textext.addPlugin("autocomplete",t);var n=t.prototype,r=".",i="text-selected",s=r+i,o="text-suggestion",u=r+o,a="text-label",f=r+a,l="autocomplete.enabled",c="autocomplete.dropdown.position",h="autocomplete.dropdown.maxHeight",p="autocomplete.render",d="html.dropdown",v="html.suggestion",m="hideDropdown",g="showDropdown",y="getSuggestions",b="getFormData",w="toggleDropdown",E="above",S="below",x="mousedownOnAutocomplete",T={autocomplete:{enabled:!0,dropdown:{position:S,maxHeight:"100px"}},html:{dropdown:'<div class="text-dropdown"><div class="text-list"/></div>',suggestion:'<div class="text-suggestion"><span class="text-label"/></div>'}};n.init=function(t){var n=this;n.baseInit(t,T);var r=n.input(),i;n.opts(l)===!0&&(n.on({blur:n.onBlur,anyKeyUp:n.onAnyKeyUp,deleteKeyUp:n.onAnyKeyUp,backspaceKeyPress:n.onBackspaceKeyPress,enterKeyPress:n.onEnterKeyPress,escapeKeyPress:n.onEscapeKeyPress,setSuggestions:n.onSetSuggestions,showDropdown:n.onShowDropdown,hideDropdown:n.onHideDropdown,toggleDropdown:n.onToggleDropdown,postInvalidate:n.positionDropdown,getFormData:n.onGetFormData,downKeyDown:n.onDownKeyDown,upKeyDown:n.onUpKeyDown}),i=e(n.opts(d)),i.insertAfter(r),n.on(i,{mouseover:n.onMouseOver,mousedown:n.onMouseDown,click:n.onClick}),i.css("maxHeight",n.opts(h)).addClass("text-position-"+n.opts(c)),e(n).data("container",i),e(document.body).click(function(e){n.isDropdownVisible()&&!n.withinWrapElement(e.target)&&n.trigger(m)}),n.positionDropdown())},n.containerElement=function(){return e(this).data("container")},n.onMouseOver=function(t){var n=this,r=e(t.target);r.is(u)&&(n.clearSelected(),r.addClass(i))},n.onMouseDown=function(e){this.containerElement().data(x,!0)},n.onClick=function(t){var n=this,r=e(t.target);(r.is(u)||r.is(f))&&n.trigger("enterKeyPress"),n.core().hasPlugin("tags")&&n.val("")},n.onBlur=function(e){var t=this,n=t.containerElement(),r=n.data(x)===!0;t.isDropdownVisible()&&(r?t.core().focusInput():t.trigger(m)),n.removeData(x)},n.onBackspaceKeyPress=function(e){var t=this,n=t.val().length>0;(n||t.isDropdownVisible())&&t.getSuggestions()},n.onAnyKeyUp=function(e,t){var n=this,r=n.opts("keys."+t)!=null;n.val().length>0&&!r&&n.getSuggestions()},n.onDownKeyDown=function(e){var t=this;t.isDropdownVisible()?t.toggleNextSuggestion():t.getSuggestions()},n.onUpKeyDown=function(e){this.togglePreviousSuggestion()},n.onEnterKeyPress=function(e){var t=this;t.isDropdownVisible()&&t.selectFromDropdown()},n.onEscapeKeyPress=function(e){var t=this;t.isDropdownVisible()&&t.trigger(m)},n.positionDropdown=function(){var e=this,t=e.containerElement(),n=e.opts(c),r=e.core().wrapElement().outerHeight(),i={};i[n===E?"bottom":"top"]=r+"px",t.css(i)},n.suggestionElements=function(){return this.containerElement().find(u)},n.setSelectedSuggestion=function(t){if(!t)return;var n=this,r=n.suggestionElements(),s=r.first(),u,a;n.clearSelected();for(a=0;a<r.length;a++){u=e(r[a]);if(n.itemManager().compareItems(u.data(o),t)){s=u.addClass(i);break}}s.addClass(i),n.scrollSuggestionIntoView(s)},n.selectedSuggestionElement=function(){return this.suggestionElements().filter(s).first()},n.isDropdownVisible=function(){return this.containerElement().is(":visible")===!0},n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o=i;t[100]=r.formDataObject(s,o)},n.initPriority=function(){return 200},n.onHideDropdown=function(e){this.hideDropdown()},n.onToggleDropdown=function(e){var t=this;t.trigger(t.containerElement().is(":visible")?m:g)},n.onShowDropdown=function(t,n){var r=this,i=r.selectedSuggestionElement().data(o),s=r._suggestions;if(!s)return r.trigger(y);e.isFunction(n)?n(r):(r.renderSuggestions(r._suggestions),r.toggleNextSuggestion()),r.showDropdown(r.containerElement()),r.setSelectedSuggestion(i)},n.onSetSuggestions=function(e,t){var n=this,r=n._suggestions=t.result;t.showHideDropdown!==!1&&n.trigger(r===null||r.length===0?m:g)},n.getSuggestions=function(){var e=this,t=e.val();if(e._previousInputValue==t)return;t==""&&(current=null),e._previousInputValue=t,e.trigger(y,{query:t})},n.clearItems=function(){this.containerElement().find(".text-list").children().remove()},n.renderSuggestions=function(t){var n=this;n.clearItems(),e.each(t||[],function(e,t){n.addSuggestion(t)})},n.showDropdown=function(){this.containerElement().show()},n.hideDropdown=function(){var e=this,t=e.containerElement();e._previousInputValue=null,t.hide()},n.addSuggestion=function(e){var t=this,n=t.opts(p),r=t.addDropdownItem(n?n.call(t,e):t.itemManager().itemToString(e));r.data(o,e)},n.addDropdownItem=function(t){var n=this,r=n.containerElement().find(".text-list"),i=e(n.opts(v));return i.find(".text-label").html(t),r.append(i),i},n.clearSelected=function(){this.suggestionElements().removeClass(i)},n.toggleNextSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n;t.length>0?(n=t.next(),n.length>0&&t.removeClass(i)):n=e.suggestionElements().first(),n.addClass(i),e.scrollSuggestionIntoView(n)},n.togglePreviousSuggestion=function(){var e=this,t=e.selectedSuggestionElement(),n=t.prev();if(n.length==0)return;e.clearSelected(),n.addClass(i),e.scrollSuggestionIntoView(n)},n.scrollSuggestionIntoView=function(e){var t=e.outerHeight(),n=this.containerElement(),r=n.innerHeight(),i=n.scrollTop(),s=(e.position()||{}).top,o=null,u=parseInt(n.css("paddingTop"));if(s==null)return;s+t>r&&(o=s+i+t-r+u),s<0&&(o=s+i-u),o!=null&&n.scrollTop(o)},n.selectFromDropdown=function(){var e=this,t=e.selectedSuggestionElement().data(o);t&&(e.val(e.itemManager().itemToString(t)),e.core().getFormData()),e.trigger(m)},n.withinWrapElement=function(e){return this.core().wrapElement().find(e).size()>0}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.autocomplete.js",function(){}),function(e){function t(){}e.fn.textext.TextExtClear=t,e.fn.textext.addPlugin("clear",t);var n=t.prototype,r="html.clear",i={html:{clear:'<div class="text-clear"/>'}};n.init=function(t){var n=this,s;n.baseInit(t,i),n._clear=s=e(n.opts(r)),n.core().wrapElement().append(s),s.bind("click",function(e){n.onClearClick(e)})},n.onClearClick=function(t){var n=this;if(typeof n.core()._plugins.tags!="undefined"){var r=n.core()._plugins.tags.tagElements();for(var i=0;i<r.length;i++)n.core()._plugins.tags.removeTag(e(r[i]))}n.val(""),n.core().getFormData()}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.clear.js",function(){}),function(e){function t(){}e.fn.textext.TextExtFilter=t,e.fn.textext.addPlugin("filter",t);var n=t.prototype,r="filter.enabled",i="filter.items",s={filter:{enabled:!0,items:null}};n.init=function(e){var t=this;t.baseInit(e,s),t.on({getFormData:t.onGetFormData,isTagAllowed:t.onIsTagAllowed,setSuggestions:t.onSetSuggestions}),t._suggestions=null},n.onGetFormData=function(e,t,n){var r=this,i=r.val(),s=i,o="";r.core().hasPlugin("tags")||(r.isValueAllowed(s)&&(o=i),t[300]=r.formDataObject(s,o))},n.isValueAllowed=function(e){var t=this,n=t.opts("filterItems")||t._suggestions||[],i=t.itemManager(),s=!t.opts(r),o;for(o=0;o<n.length&&!s;o++)i.compareItems(e,n[o])&&(s=!0);return s},n.onIsTagAllowed=function(e,t){t.result=this.isValueAllowed(t.tag)},n.onSetSuggestions=function(e,t){this._suggestions=t.result}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.filter.js",function(){}),function(e){function t(){}e.fn.textext.TextExtFocus=t,e.fn.textext.addPlugin("focus",t);var n=t.prototype,r="html.focus",i={html:{focus:'<div class="text-focus"/>'}};n.init=function(e){var t=this;t.baseInit(e,i),t.core().wrapElement().append(t.opts(r)),t.on({blur:t.onBlur,focus:t.onFocus}),t._timeoutId=0},n.onBlur=function(e){var t=this;clearTimeout(t._timeoutId),t._timeoutId=setTimeout(function(){t.getFocus().hide()},100)},n.onFocus=function(e){var t=this;clearTimeout(t._timeoutId),t.getFocus().show()},n.getFocus=function(){return this.core().wrapElement().find(".text-focus")}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.focus.js",function(){}),function(e){function t(){}e.fn.textext.TextExtPrompt=t,e.fn.textext.addPlugin("prompt",t);var n=t.prototype,r="text-hide-prompt",i="prompt",s="html.prompt",o={prompt:"Awaiting input...",html:{prompt:'<div class="text-prompt"/>'}};n.init=function(t){var n=this,r="placeholder",u,a;n.baseInit(t,o),u=e(n.opts(s)),e(n).data("container",u),n.core().wrapElement().append(u),n.setPrompt(n.opts(i)),a=t.input().attr(r),a||(a=n.opts(i)),t.input().attr(r,""),a&&n.setPrompt(a),e.trim(n.val()).length>0&&n.hidePrompt(),n.on({blur:n.onBlur,focus:n.onFocus,postInvalidate:n.onPostInvalidate,postInit:n.onPostInit})},n.onPostInit=function(e){this.invalidateBounds()},n.onPostInvalidate=function(e){this.invalidateBounds()},n.invalidateBounds=function(){var e=this,t=e.input();e.containerElement().css({paddingLeft:t.css("paddingLeft"),paddingTop:t.css("paddingTop")})},n.onBlur=function(e){var t=this;t.startTimer("prompt",.1,function(){t.showPrompt()})},n.showPrompt=function(){var t=this,n=t.input();e.trim(t.val()).length===0&&!n.is(":focus")&&t.containerElement().removeClass(r)},n.hidePrompt=function(){this.stopTimer("prompt"),this.containerElement().addClass(r)},n.onFocus=function(e){this.hidePrompt()},n.setPrompt=function(e){this.containerElement().text(e)},n.containerElement=function(){return e(this).data("container")}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.prompt.js",function(){}),function(e){function t(){}e.fn.textext.TextExtSuggestions=t,e.fn.textext.addPlugin("suggestions",t);var n=t.prototype,r="suggestions",i={suggestions:null};n.init=function(e){var t=this;t.baseInit(e,i),t.on({getSuggestions:t.onGetSuggestions,postInit:t.onPostInit})},n.setSuggestions=function(e,t){this.trigger("setSuggestions",{result:e,showHideDropdown:t!=0})},n.onPostInit=function(e){var t=this;t.setSuggestions(t.opts(r),!1)},n.onGetSuggestions=function(e,t){var n=this,i=n.opts(r);i.sort(),n.setSuggestions(n.itemManager().filter(i,t.query))}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.suggestions.js",function(){}),function(e){function t(){}e.fn.textext.TextExtTags=t,e.fn.textext.addPlugin("tags",t);var n=t.prototype,r=".",i="text-tags-on-top",s=r+i,o="text-tag",u=r+o,a="text-tags",f=r+a,l="text-label",c=r+l,h="text-remove",p=r+h,d="tags.enabled",v="tags.items",m="html.tag",g="html.tags",y="isTagAllowed",b="tagClick",w={tags:{enabled:!0,items:null},html:{tags:'<div class="text-tags"/>',tag:'<div class="text-tag"><div class="text-button"><span class="text-label"/><a class="text-remove"/></div></div>'}};n.init=function(t){this.baseInit(t,w);var n=this,r=n.input(),i;n.opts(d)&&(i=e(n.opts(g)),r.after(i),e(n).data("container",i),n.on({enterKeyPress:n.onEnterKeyPress,backspaceKeyDown:n.onBackspaceKeyDown,preInvalidate:n.onPreInvalidate,postInit:n.onPostInit,getFormData:n.onGetFormData}),n.on(i,{click:n.onClick,mousemove:n.onContainerMouseMove}),n.on(r,{mousemove:n.onInputMouseMove})),n._originalPadding={left:parseInt(r.css("paddingLeft")||0),top:parseInt(r.css("paddingTop")||0)},n._paddingBox={left:0,top:0},n.updateFormCache()},n.containerElement=function(){return e(this).data("container")},n.onPostInit=function(e){var t=this;t.addTags(t.opts(v))},n.onGetFormData=function(e,t,n){var r=this,i=n===13?"":r.val(),s=r._formData;t[200]=r.formDataObject(i,s)},n.initPriority=function(){return 100},n.onInputMouseMove=function(e){this.toggleZIndex(e)},n.onContainerMouseMove=function(e){this.toggleZIndex(e)},n.onBackspaceKeyDown=function(e){var t=this,n=t.tagElements().last();t.val().length==0&&t.removeTag(n)},n.onPreInvalidate=function(e){var t=this,n=t.tagElements().last(),r=n.position();n.length>0?r.left+=n.innerWidth():r=t._originalPadding,t._paddingBox=r,t.input().css({paddingLeft:r.left,paddingTop:r.top})},n.onClick=function(t){function l(e,t){a.data(o,e),a.find(c).text(n.itemManager().itemToString(e)),n.updateFormCache(),r.getFormData(),r.invalidateBounds(),t&&r.focusInput()}var n=this,r=n.core(),i=e(t.target),s=0,a;i.is(f)?s=1:i.is(p)?(n.removeTag(i.parents(u+":first")),s=1):i.is(c)&&(a=i.parents(u+":first"),n.trigger(b,a,a.data(o),l)),s&&r.focusInput()},n.onEnterKeyPress=function(e){var t=this,n=t.val(),r=t.itemManager().stringToItem(n);t.isTagAllowed(r)&&(t.addTags([r]),t.core().focusInput())},n.updateFormCache=function(){var t=this,n=[];t.tagElements().each(function(){n.push(e(this).data(o))}),t._formData=n},n.toggleZIndex=function(e){var t=this,n=t.input().offset(),r=e.clientX-n.left,o=e.clientY-n.top,u=t._paddingBox,a=t.containerElement(),f=a.is(s),l=r>u.left&&o>u.top;(!f&&!l||f&&l)&&a[(f?"remove":"add")+"Class"](i)},n.tagElements=function(){return this.containerElement().find(u)},n.isTagAllowed=function(e){var t={tag:e,result:!0};return this.trigger(y,t),t.result===!0},n.addTags=function(e){if(!e||e.length==0)return;var t=this,n=t.core(),r=t.containerElement(),i,s;for(i=0;i<e.length;i++)s=e[i],s&&t.isTagAllowed(s)&&r.append(t.renderTag(s));t.updateFormCache(),n.getFormData(),n.invalidateBounds()},n.getTagElement=function(t){var n=this,r=n.tagElements(),i,s;for(i=0;i<r.length,s=e(r[i]);i++)if(n.itemManager().compareItems(s.data(o),t))return s},n.removeTag=function(t){var n=this,r=n.core(),i;t instanceof e?(i=t,t=t.data(o)):i=n.getTagElement(t),i.remove(),n.updateFormCache(),r.getFormData(),r.invalidateBounds()},n.renderTag=function(t){var n=this,r=e(n.opts(m));return r.find(".text-label").text(n.itemManager().itemToString(t)),r.data(o,t),r}}(jQuery),define("jam/jquery-textext/src/js/textext.plugin.tags.js",function(){}),define("js/pattern.autocomplete",["jquery","js/patterns","jam/jquery-textext/src/js/textext.core.js","jam/jquery-textext/src/js/textext.plugin.ajax.js","jam/jquery-textext/src/js/textext.plugin.arrow.js","jam/jquery-textext/src/js/textext.plugin.autocomplete.js","jam/jquery-textext/src/js/textext.plugin.clear.js","jam/jquery-textext/src/js/textext.plugin.filter.js","jam/jquery-textext/src/js/textext.plugin.focus.js","jam/jquery-textext/src/js/textext.plugin.prompt.js","jam/jquery-textext/src/js/textext.plugin.suggestions.js","jam/jquery-textext/src/js/textext.plugin.tags.js"],function(e,t){var n=function(){};n.prototype={init:function(e){},filter:function(e,t){var n=[],r,i;for(r=0;r<e.length;r+=1)i=e[r],this.itemContains(i,t)&&n.push(i);return n},itemContains:function(e,t){return this.itemToString(e).toLowerCase().indexOf(t.toLowerCase())===0},stringToItem:function(e){return e},itemToString:function(e){return e},compareItems:function(e,t){return e===t}};var r=t.Base.extend({name:"autocomplete",jqueryPlugin:"patternAutocomplete",defaults:{createItems:!0,plugins:"autocomplete tags ajax prompt focus arrow",prompt:"Add...",ajaxDataType:"json",ajaxCacheResults:!0},init:function(){var t=this;t.options=e.extend({},t.defaults,t.options),t.textextOptions={itemManager:n,tagsItems:JSON.parse(t.$el.val()),plugins:t.options.plugins,prompt:t.options.prompt,ext:{core:{onSetFormData:function(t,n){e.each(n,function(e,t){n[e]=t.trim()}),this.hiddenInput().val(this.serializeData(n))}},autocomplete:{onSetSuggestions:function(n,r){var i=[],s=this._suggestions=r.result,o=JSON.parse(t.$el.textext()[0].hiddenInput().val());e.each(s,function(t,n){e.inArray(n,o)===-1&&i.push(n)}),this._suggestions=i,r.showHideDropdown!==!1&&this.trigger(i===null||i.length===0?"hideDropdown":"showDropdown")}},tags:{onIsTagAllowed:function(n,r){r.result=!1,this.isValueAllowed(r.tag)&&e.inArray(r.tag.trim(),JSON.parse(t.$el.textext()[0].hiddenInput().val()))!==-1&&(r.result=!0,!t.options.createItems&&e.inArray(r.tag,this._suggestions)!==1&&(r.result=!1))}}}},t.options.ajaxUrl&&e.extend(t.textextOptions,{ajax:{url:t.options.ajaxUrl,dataType:t.options.ajaxDataType,cacheResults:t.options.ajaxCacheResults,dataCallback:function(e){return{query:e}}}}),t.$el.val("");if(!t.$el.is(":visible")){var r=t.$el.parents(":hidden").last().show();t.$el.textext(t.textextOptions),r.hide()}else t.$el.textext(t.textextOptions)}});return t.register(r),r}),function(e,t,n){function h(e,t){if(typeof e=="function")return e.call(t)}function p(e){return(e<10?"0":"")+e}function d(e,t,n,r){return t?(t=Array.isArray(t)?t.join(""):t,n=n?' class="'+n+'"':"",r=r?" "+r:"","<"+e+n+r+">"+t+"</"+e+">"):""}function v(e,t){return Array.isArray(e)?e=new Date(e[0],e[1],e[2]):isNaN(e)?t||(e=new Date,e.setHours(0,0,0,0)):e=new Date(e),{YEAR:t||e.getFullYear(),MONTH:t||e.getMonth(),DATE:t||e.getDate(),DAY:t||e.getDay(),TIME:t||e.getTime(),OBJ:t||e}}var r=7,i=6,s=i*r,o="div",u="pickadate__",a=navigator.userAgent.match(/MSIE/),f=e(t),l=e(t.body),c=function(n,i){function _(e,t){return e===!0?w:Array.isArray(e)?(--e[1],v(e)):e&&!isNaN(e)?v([w.YEAR,w.MONTH,w.DATE+e]):v(0,t?Infinity:-Infinity)}function D(e,t){e=e.TIME?e:v(e);if(x){var n=e;while(x.filter(T,e).length)e=v([e.YEAR,e.MONTH,e.DATE+(t||1)]),e.MONTH!=n.MONTH&&(e=v([n.YEAR,n.MONTH,t>0?++n.DATE:--n.DATE]),n=e)}return e.TIME<E.TIME?e=D(E):e.TIME>S.TIME&&(e=D(S,-1)),e}function P(e){if(e&&k.YEAR>=S.YEAR&&k.MONTH>=S.MONTH||!e&&k.YEAR<=E.YEAR&&k.MONTH<=E.MONTH)return"";var t="month"+(e?"Next":"Prev");return d(o,i[t],y[t],"data-nav="+(e||-1))}function H(e){return i.monthSelector?d("select",e.map(function(e,t){return d("option",e,0,"value="+t+(k.MONTH==t?" selected":"")+R(t,k.YEAR," disabled",""))}),y.selectMonth,U()):d(o,e[k.MONTH],y.month)}function B(){var e=k.YEAR,t=i.yearSelector;if(t){t=t===!0?5:~~(t/2);var n=[],r=e-t,s=q(r,E.YEAR),u=e+t+(s-r),a=q(u,S.YEAR,1);s=q(r-(u-a),E.YEAR);for(var f=0;f<=a-s;f+=1)n.push(s+f);return d("select",n.map(function(t){return d("option",t,0,"value="+t+(e==t?" selected":""))}),y.selectYear,U())}return d(o,e,y.year)}function j(){var e,t,n,u=[],a="",f=v([k.YEAR,k.MONTH+1,0]).DATE,l=v([k.YEAR,k.MONTH,1]).DAY+(i.firstDay?-2:-1),c=function(e,t){var n,r=[y.day,t?y.dayInfocus:y.dayOutfocus];if(e.TIME<E.TIME||e.TIME>S.TIME||x&&x.filter(T,e).length)n=1,r.push(y.dayDisabled);return e.TIME==w.TIME&&r.push(y.dayToday),e.TIME==N.TIME&&r.push(y.dayHighlighted),e.TIME==C.TIME&&r.push(y.daySelected),[r.join(" "),"data-"+(n?"disabled":"date")+"="+[e.YEAR,e.MONTH+1,e.DATE].join("/")]};l+=l<-1?7:0;for(var h=0;h<s;h+=1)t=h-l,e=v([k.YEAR,k.MONTH,t]),n=c(e,t>0&&t<=f),u.push(d("td",d(o,e.DATE,n[0],n[1]))),h%r+1==r&&(a+=d("tr",u.splice(0,r)));return d("tbody",a,y.body)}function F(){return d("button",i.today,y.buttonToday,"data-date="+z("yyyy/mm/dd",w)+" "+U())+d("button",i.clear,y.buttonClear,"data-clear=1 "+U())}function I(){return d(o,d(o,d(o,d(o,P()+P(1)+H(i.showMonthsFull?i.monthsFull:i.monthsShort)+B(),y.header)+d("table",[A,j()],y.table)+d(o,F(),y.footer),y.calendar),y.wrap),y.frame)}function q(e,t,n){return n&&e<t||!n&&e>t?e:t}function R(e,t,n,r){return t<=E.YEAR&&e<E.MONTH?n||E.MONTH:t>=S.YEAR&&e>S.MONTH?n||S.MONTH:r!=null?r:e}function U(){return"tabindex="+(g.isOpen?0:-1)}function z(e,t){return b.toArray(e||i.format).map(function(e){return h(b[e],t||C)||e}).join("")}function W(e,t){N=e,k=e,t||X(e),G()}function X(e){C=e||C,n.val(e?z():"").trigger("change"),L&&(L.value=e?z(i.formatSubmit):""),h(i.onSelect,c)}function V(e){return O.find("."+e)}function J(e,t){t=t||k.YEAR,e=R(e,t),k=v([t,e,1]),G()}function K(e){Q().map(function(t){t&&(t.tabIndex=e)})}function Q(){return[g.selectMonth,g.selectYear,V(y.buttonToday)[0],V(y.buttonClear)[0]]}function G(){O.html(I()),Y()}function Y(){g.selectMonth=V(y.selectMonth).on({click:function(e){e.stopPropagation()},change:function(){J(+this.value),V(y.selectMonth).focus()}})[0],g.selectYear=V(y.selectYear).on({click:function(e){e.stopPropagation()},change:function(){J(k.MONTH,+this.value),V(y.selectYear).focus()}})[0]}var u=function(){},c=u.prototype={constructor:u,$node:n,init:function(){return n.on({"focus click":function(){(!a||a&&!g._IE)&&c.open(),O.addClass(y.focused),g._IE=0},blur:function(){O.removeClass(y.focused)},keydown:function(e){var t=e.keyCode,n=t==8||t==46;if(n||!g.isOpen&&M[t])e.preventDefault(),e.stopPropagation(),n?c.clear().close():c.open()}}).after([O,L]),m.autofocus&&c.open(),Y(),h(i.onStart,c),c},open:function(){return g.isOpen?c:(g.isOpen=!0,K(0),n.focus().addClass(y.inputActive),O.addClass(y.opened),l.addClass(y.bodyActive),f.on("focusin.P"+g.id,function(e){!O.find(e.target).length&&e.target!=m&&c.close()}).on("click.P"+g.id,function(e){e.target!=m&&c.close()}).on("keydown.P"+g.id,function(e){var t=e.keyCode,n=M[t];t==27?(m.focus(),c.close()):e.target==m&&(n||t==13)&&(e.preventDefault(),n?W(D([k.YEAR,k.MONTH,N.DATE+n],n),1):(X(N),G(),c.close()))}),h(i.onOpen,c),c)},close:function(){return g.isOpen?(g.isOpen=!1,K(-1),n.removeClass(y.inputActive),O.removeClass(y.opened),l.removeClass(y.bodyActive),f.off(".P"+g.id),h(i.onClose,c),c):c},show:function(e,t){return J(--e,t),c},clear:function(){return X(0),G(),c},getDate:function(e){return m.value?e===!0?C.OBJ:z(e):""},setDate:function(e,t,n,r){return W(D([e,--t,n]),r),c},getDateLimit:function(e,t){return z(t,e?S:E)},setDateLimit:function(e,t){return t?(S=_(e,t),k.TIME>S.TIME&&(k=S)):(E=_(e),k.TIME<E.TIME&&(k=E)),G(),c}},m=function(e){return e.autofocus=e==t.activeElement,e.type="text",e.readOnly=!0,e}(n[0]),g={id:~~(Math.random()*1e9)},y=i.klass,b=function(){function e(e){return e.match(/\w+/)[0].length}function t(e){return/\d/.test(e[1])?2:1}function n(e,t,n){var r=e.match(/\w+/)[0];return!t.mm&&!t.m&&(t.m=n.indexOf(r)+1),r.length}return{d:function(e){return e?t(e):this.DATE},dd:function(e){return e?2:p(this.DATE)},ddd:function(t){return t?e(t):i.weekdaysShort[this.DAY]},dddd:function(t){return t?e(t):i.weekdaysFull[this.DAY]},m:function(e){return e?t(e):this.MONTH+1},mm:function(e){return e?2:p(this.MONTH+1)},mmm:function(e,t){var r=i.monthsShort;return e?n(e,t,r):r[this.MONTH]},mmmm:function(e,t){var r=i.monthsFull;return e?n(e,t,r):r[this.MONTH]},yy:function(e){return e?2:(""+this.YEAR).slice(2)},yyyy:function(e){return e?4:this.YEAR},toArray:function(e){return e.split(/(?=\b)(d{1,4}|m{1,4}|y{4}|yy)+(\b)/g)}}}(),w=v(),E=_(i.dateMin),S=_(i.dateMax,1),x=function(e){if(Array.isArray(e))return e[0]===!0&&(g.disabled=e.shift()),e.map(function(e){return isNaN(e)?(--e[1],v(e)):--e+i.firstDay})}(i.datesDisabled),T=function(){var e=function(e){return this.TIME==e.TIME||x.indexOf(this.DAY)>-1};return g.disabled?function(t,n,r){return r.map(e,this).indexOf(!0)<0}:e}(),N=function(e,t){return e?(t={},b.toArray(i.formatSubmit).map(function(n){var r=b[n]?b[n](e,t):n.length;b[n]&&(t[n]=e.slice(0,r)),e=e.slice(r)}),t=[+(t.yyyy||t.yy),+(t.mm||t.m)-1,+(t.dd||t.d)]):t=Date.parse(t),D(t&&(!isNaN(t)||Array.isArray(t))?t:w)}(m.getAttribute("data-value"),m.value),C=N,k=N,L=i.formatSubmit?e("<input type=hidden name="+m.name+i.hiddenSuffix+">").val(m.value?z(i.formatSubmit):"")[0]:null,A=function(e){return i.firstDay&&e.push(e.splice(0,1)[0]),d("thead",d("tr",e.map(function(e){return d("th",e,y.weekdays)})))}((i.showWeekdaysShort?i.weekdaysShort:i.weekdaysFull).slice(0)),O=e(d(o,I(),y.holder)).on("mousedown",function(e){Q().indexOf(e.target)<0&&e.preventDefault()}).on("click",function(t){var n,r=e(t.target),i=r.data();t.stopPropagation(),m.focus(),g._IE=1,i.nav?J(k.MONTH+i.nav):i.clear?c.clear().close():i.date?(n=i.date.split("/"),c.setDate(+n[0],+n[1],+n[2]).close()):r[0]==O[0]&&c.close()}),M={40:7,38:-7,39:1,37:-1};return new c.init};e.fn.pickadate=function(t){var n="pickadate";return t=e.extend(!0,{},e.fn.pickadate.defaults,t),t.disablePicker?this:this.each(function(){var r=e(this);this.nodeName=="INPUT"&&!r.data(n)&&r.data(n,new c(r,t))})},e.fn.pickadate.defaults={monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthPrev:"&#9664;",monthNext:"&#9654;",showMonthsFull:1,showWeekdaysShort:1,today:"Today",clear:"Clear",format:"d mmmm, yyyy",formatSubmit:0,hiddenSuffix:"_submit",firstDay:0,monthSelector:0,yearSelector:0,dateMin:0,dateMax:0,datesDisabled:0,disablePicker:0,onOpen:0,onClose:0,onSelect:0,onStart:0,klass:{bodyActive:u+"active",inputActive:u+"input--active",holder:u+"holder",opened:u+"holder--opened",focused:u+"holder--focused",frame:u+"frame",wrap:u+"wrap",calendar:u+"calendar",table:u+"table",header:u+"header",monthPrev:u+"nav--prev",monthNext:u+"nav--next",month:u+"month",year:u+"year",selectMonth:u+"select--month",selectYear:u+"select--year",weekdays:u+"weekday",body:u+"body",day:u+"day",dayDisabled:u+"day--disabled",daySelected:u+"day--selected",dayHighlighted:u+"day--highlighted",dayToday:u+"day--today",dayInfocus:u+"day--infocus",dayOutfocus:u+"day--outfocus",footer:u+"footer",buttonClear:u+"button--clear",buttonToday:u+"button--today"}}}(jQuery,document),define("jam/pickadate/source/pickadate",function(){}),define("js/pattern.calendar",["jquery","js/patterns","jam/pickadate/source/pickadate"],function(e,t,n,r){var i=t.Base.extend({name:"calendar",jqueryPlugin:"patternCalendar",defaults:{klassWrapper:"pattern-calendar",klassIcon:"pattern-calendar-icon",klassYearInput:"pattern-calendar-year",klassMonthInput:"pattern-calendar-month",klassDayInput:"pattern-calendar-day",klassHourInput:"pattern-calendar-hour",klassMinuteInput:"pattern-calendar-minute",klassAMPMInput:"pattern-calendar-ampm",klassDelimiter:"pattern-calendar-delimiter",format:"d-mmmm-yyyy@HH:MM",formatSubmit:"yyyy-m-d H:M",showAMPM:!0,AMPM:["AM","PM"],minuteStep:"5"},init:function(){function r(){n.$years.val()!==""&&n.$months.val()!==""&&n.$days.val()!==""&&n.pickadate.setDate(parseInt(n.$years.val(),10),parseInt(n.$months.val(),10),parseInt(n.$days.val(),10),!0),n.setDate(n.$years.val(),n.$months.val(),n.$days.val(),n.$hours.val(),n.$minutes.val(),n.$ampm.val())}var n=this;n.options=e.extend({},n.defaults,n.options),n.pickadateOptions=e.extend({},e.fn.pickadate.defaults,{monthSelector:!0,yearSelector:!0},t.getOptions(n.$el,"pickadate"),{formatSubmit:"yyyy-mm-dd",onOpen:function(){},onClose:function(){},onSelect:function(e){var t=this.getDate("yyyy-mm-dd").split("-");n.$years.val(parseInt(t[0],10)),n.$months.val(parseInt(t[1],10)),n.$days.val(parseInt(t[2],10)),n.setDate(n.$years.val(),n.$months.val(),n.$days.val(),n.$hours.val(),n.$minutes.val(),n.$ampm.val())}}),n.$el.hide(),n.$wrapper=e("<div/>").addClass(n.options.klassWrapper).appendTo(n.$el.parent()),n.pickadate=e("<input/>").hide().appendTo(n.$wrapper).pickadate(n.pickadateOptions).data("pickadate"),n.$years=e("<select/>").addClass(n.options.klassYearInput).on("change",r),n.$months=e("<select/>").addClass(n.options.klassMonthInput).on("change",r),n.$days=e("<select/>").addClass(n.options.klassDayInput).on("change",r),n.$hours=e("<select/>").addClass(n.options.klassHourInput).on("change",r),n.$minutes=e("<select/>").addClass(n.options.klassMinuteInput).on("change",r),n.$icon=e('<span class="'+n.options.klassIcon+'"/>').on("click",function(e){e.stopPropagation(),e.preventDefault(),n.toggle()}),e.each(n._strftime(n.options.format,function(t){switch(t){case"yy":case"yyyy":return n.$years.append(n._getYears(t));case"m":case"mm":case"mmm":case"mmmm":return n.$months.append(n._getMonths(t));case"d":case"dd":case"ddd":case"dddd":return n.$days.append(n._getDays(t));case"H":case"HH":return n.$hours.append(n._getHours(t));case"M":case"MM":return n.$minutes.append(n._getMinutes(t));case"@":return n.$icon;default:return e("<span> "+t+" </span>").addClass(n.options.klassDelimiter)}}),function(e,t){n.$wrapper.append(t)}),n.$ampm=e("<select/>").addClass(n.options.klassAMPMInput).append(n._getAMPM()).on("change",r),n.options.showAMPM&&(n.$wrapper.append(e("<span> </span>")),n.$wrapper.append(n.$ampm));if(n.$el.val()!==""){var i=n.$el.val().split(" "),s=i[0].split("-"),o=i[1].split(":"),u=parseInt(o[0],10)>=12&&"PM"||"AM";o[0]-=parseInt(o[0],10)>=12&&12||0,n.setDate(s[0],s[1],s[2],o[0],o[1],u),n.$years.val(""+parseInt(s[0],10)),n.$months.val(""+parseInt(s[1],10)),n.$days.val(""+parseInt(s[2],10)),n.$hours.val(""+parseInt(o[0],10)),n.$minutes.val(""+parseInt(o[1],10)),n.$ampm.val(u)}},_strftime:function(t,n,r){var i=this,s=[];return r=r||["dddd","ddd","dd","d","mmmm","mmm","mm","m","yyyy","yy","HH","H","MM","M","@"],e.each(r,function(e,o){if(t.indexOf(o)!==-1){var u=t.split(o),a;return r.length>0&&u[0]!==""&&(a=s.concat(i._strftime(u[0],n,r.slice(e))),a.length===s.length?s.push(n(u[0])):s=a),s.push(n(o)),r.length>0&&u[1]!==""&&(a=s.concat(i._strftime(u[1],n,r.slice(e))),a.length===s.length?s.push(n(u[1])):s=a),!1}if(r.length===0)return!1}),s},_getYears:function(e){var t=[],n=this.getDate("yyyy"),i=n,s,o;n?(s=this.pickadate.getdatelimit("yyyy"),o=this.pickadate.getDateLimit(!0,"yyyy")):(n=(new Date).getFullYear(),s=n-10,o=n+10),t.push(this._createOption("","--",i===r));while(s<=o)e==="yy"?t.push(this._createOption(s,(""+s).slice(-2),s===i)):t.push(this._createOption(s,s,s===i)),s+=1;return t},_getMonths:function(e){var t=[],n=this.getDate("m"),i=1;t.push(this._createOption("","--",n===r));while(i<=12)e==="m"?t.push(this._createOption(i,i,n===i)):e==="mm"?t.push(this._createOption(i,("0"+i).slice(-2),n===i)):e==="mmm"?t.push(this._createOption(i,this.pickadateOptions.monthsShort[i-1],n===i)):t.push(this._createOption(i,this.pickadateOptions.monthsFull[i-1],n===i)),i+=1;return t},_getDays:function(t){var n=[],i=this.getDate("d"),s=this.getDate("m"),o=31,u=1;n.push(this._createOption("","--",i===r)),s&&(e.inArray(s,[4,6,9,11])?o=30:e.inArray(s,[2])&&(o=29));while(u<=o)t==="d"?n.push(this._createOption(u,u,i===u)):n.push(this._createOption(u,("0"+u).slice(-2),i===u)),u+=1;return n},_getAMPM:function(){return[this._createOption(this.options.AMPM[0],this.options.AMPM[0]),this._createOption(this.options.AMPM[1],this.options.AMPM[1])]},_getHours:function(e){var t=[],n=this.getDate("h"),i=0;t.push(this._createOption("","--",n===r));while(i<(this.options.showAMPM&&12||24))e==="H"?t.push(this._createOption(i,i,n===i)):t.push(this._createOption(i,("0"+i).slice(-2),n===i)),i+=1;return t},_getMinutes:function(e){var t=[],n=this.getDate("m"),i=0;t.push(this._createOption("","--",n===r));while(i<60)e==="M"?t.push(this._createOption(i,i,n===i)):t.push(this._createOption(i,("0"+i).slice(-2),n===i)),i+=parseInt(this.options.minuteStep,10);return t},_createOption:function(t,n,r){var i=e("<option/>").attr("value",t).html(n);return r&&i.attr("selected","selected"),i},setDate:function(e,t,n,i,s,o){var u=this;u._rawDate=r,u.$el.attr("value",""),e!==""&&t!==""&&n!==""&&i!==""&&s!==""&&(u._rawDate=new Date(parseInt(e,10),parseInt(t,10),parseInt(n,10),parseInt(i,10)+(o==="PM"&&12||0),parseInt(s,10)),u.$el.attr("value",u.getDate(u.options.formatSubmit)))},getDate:function(e){var t=this;if(!t._rawDate)return;return e?t._strftime(e,function(e){switch(e){case"yy":return(""+t._rawDate.getFullYear()).slice(-2);case"yyyy":return""+t._rawDate.getFullYear();case"m":return""+t._rawDate.getMonth();case"mm":return("0"+t._rawDate.getMonth()).slice(-2);case"mmm":return t.pickadateOptions.monthsShort[t._rawDate.getMonth()];case"mmmm":return t.pickadateOptions.monthsFull[t._rawDate.getMonth()];case"d":return""+t._rawDate.getDate();case"dd":return("0"+t._rawDate.getDate()).slice(-2);case"ddd":return t.pickadateOptions.weekdaysShort[t._rawDate.getDay()];case"dddd":return t.pickadateOptions.weekdaysFull[t._rawDate.getDay()];case"H":return""+t._rawDate.getHours();case"HH":return("0"+t._rawDate.getHours()).slice(-2);case"M":return""+t._rawDate.getMinutes();case"MM":return("0"+t._rawDate.getMinutes()).slice(-2);default:return e}}).join(""):t._rawDate},toggle:function(){this._opened?this.close():this.open()},open:function(){this._opened||(this.pickadate.open(),this._opened=!0)},close:function(){this._opened&&(this.pickadate.close(),this._opened=!1)}});return t.register(i),i}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),define("jam/bootstrap/js/bootstrap-transition",function(){}),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active:last a")[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function o(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var i=n.find("> .active"),s=r&&e.support.transition&&i.hasClass("fade");s?i.one(e.support.transition.end,o):o(),i.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),define("jam/bootstrap/js/bootstrap-tab",function(){}),define("js/pattern.tabs",["jquery","js/patterns","jam/bootstrap/js/bootstrap-transition","jam/bootstrap/js/bootstrap-tab"],function(e,t,n,r){var i=t.Base.extend({name:"tabs",jqueryPlugin:"patternTabs",defaults:{},init:function(){var t=this;t.options=e.extend({},t.defaults,t.options),t.getTabs().on("click",function(t){t.preventDefault(),e(this).tab("show")}).on("show",function(n){t.show(e(this))}).on("hide",function(n){t.hide(e(this))}).first().tab("show")},show:function(e){this.getPanels().hide(),this.getPanel(e).show()},hide:function(e){this.getPanel(e).hide()},getTabs:function(){return this.$el.find("li > a")},getPanels:function(){var t=this,n=[];return e.each(t.getTabs(),function(r,i){n.push(t.getPanel(e(i))[0])}),e(n)},getPanel:function(t){var n=t.attr("href");return n=n&&n.replace(/.*(?=#[^\s]*$)/,""),e(n)}});return t.register(i),i}),define("js/pattern.toggle",["jquery","js/patterns"],function(e,t,n){var r=t.Base.extend({name:"toggle",jqueryPlugin:"patternToggle",defaults:{attribute:"class",event:"click"},init:function(){var t=this;t.options=e.extend({},t.defaults,t.options),t.options.target?(t.$target=t.$el.closest(t.options.target),t.$target.size()===0&&(t.$target=t.closest(t.$el,t.options.target))):t.$target=t.$el,t.$target||e.error('No target found for "'+t.options.target+'".'),t.$el.on(t.options.event,function(n){n.stopPropagation(),(e.nodeName(n.target,"a")||e(n.target).parents("a").size()!==0)&&n.preventDefault(),t.toggle()})},closest:function(t,n){var r=this,i=e(n,t);if(i.size()===0){if(t.size()===0||e.nodeName(t[0],"body"))return;i=r.closest(t.parent(),n)}return i},isMarked:function(){var e=this;return e.options.attribute==="class"?this.$target.hasClass(this.options.value):this.$target.attr(this.options.attribute)===this.options.value},toggle:function(){var e=this;e.isMarked()?e.remove():e.add()},remove:function(){var e=this;e.$el.trigger("patterns.toggle.remove"),e.options.attribute==="class"?e.$target.removeClass(e.options.value):e.$target.removeAttr(e.options.attribute),e.$el.trigger("patterns.toggle.removed")},add:function(){var e=this;e.$el.trigger("patterns.toggle.add"),e.options.attribute==="class"?e.$target.addClass(e.options.value):e.$target.attr(e.options.attribute,e.options.value),e.$el.trigger("patterns.toggle.added")}});return t.register(r),r}),define("js/plone.tabs",["jquery","js/patterns","js/pattern.tabs"],function(e,t,n,r){var i=t.Base.extend({name:"plone-tabs",jqueryPlugin:"ploneTabs",defaults:{panels:".enableFormTabbing fieldset",panelKlass:"formPanel",tabKlass:"formTab",tabsKlass:"formTabs"},init:function(){var t=this;t.options=e.extend({},t.defaults,t.options),t.$panels=e(t.options.panels,t.$el);if(!t.$panels.size())return;t.$tabs=e("<ul/>").addClass(t.options.tabsKlass).insertBefore(t.$panels.parent()),t.$panels.each(function(){var n=e(this).addClass(t.options.panelKlass),r=e("> legend",n).hide();t.$tabs.append(e("<li/>").addClass(t.options.tabKlass).append(e("<a/>").attr({id:r.attr("id"),href:"#"+n.attr("id")}).append(e("<span/>").html(r.text()))))}),t.$tabs.patternTabs()}});return t.register(i),i}),jQuery&&define("jquery",[],function(){return jQuery}),define("js/widgets",["jquery","js/patterns","js/pattern.autocomplete","js/pattern.calendar","js/pattern.tabs","js/pattern.toggle","js/plone.tabs"],function(e,t){e(document).ready(function(){t.initialize(e(document))})}),define("js/jquery.iframe",["jquery","js/patterns"],function(e,t){return e.IFrame=function(e){this._init(e)},e.IFrame.prototype={_init:function(t){var n=this;n._iframe=t,n.$el=e(t.el),n.window=window.parent,n.document=window.parent.document,n.is_stretched=!1,e(document).on("click",function(t){if(e.nodeName(t.target,"a")||e(t.target).parents("a").size()===1){t.stopPropagation(),t.preventDefault();var r=e(t.target).attr("href");e.nodeName(t.target,"a")||(r=e(t.target).parents("a").attr("href")),t.which===1?n._same_window(r):t.which===2&&n._new_window(r)}else e.nodeName(t.target,"html")?n.shrink():n.$el.trigger("iframe.click",t)}),n.fit(),e(window).on("resize",function(e){n.fit()})},_same_window:function(e){this.window.location.href=e},_new_window:function(e){this.window.open(e)},shrink:function(){var e=this;e.is_stretched&&(e.$el.trigger("iframe.shrink"),e.is_stretched=!1,e.fit(),e.$el.trigger("iframe.shrinked"))},stretch:function(){var t=this;t.is_stretched||(t.$el.trigger("iframe.stretch"),t.is_stretched=!0,t.$el.css({height:e(t.document).height()}),t.$el.trigger("iframe.stretched"))},toggle:function(){var e=this;e.is_stretched?e.shrink():e.stretch()},fit:function(){var t=this;t.is_stretched?t.$el.css({height:e(t.document).height()}):(t.$el.css({height:e("body",document).height()}),e("body",t.document).css("margin-top",e("body",document).height()))}},window.parent.iframe!==t&&window.name&&window.parent.iframe[window.name]!==t&&(e.iframe=new e.IFrame(window.parent.iframe[window.name])),e.iframe}),define("js/plone.toolbar",["jquery","js/patterns","js/pattern.toggle","js/jquery.iframe"],function(e,t,n,r,i){var s=t.Base.extend({name:"plone-toolbar",jqueryPlugin:"ploneToolbar",init:function(){var t=this;t.$el.on("patterns.toggle.add",'a[data-pattern~="toggle"]',function(t){var n=e(this);e(".toolbar-dropdown-open > a").each(function(){n[0]!==e(this)[0]&&e(this).patternToggle("remove")}),r.stretch()}).on("patterns.toggle.removed",'a[data-pattern~="toggle"]',function(e){r.shrink()}),r.$el.on("iframe.shrink",function(n){e(".toolbar-dropdown-open > a",t.$el).each(function(){e(this).patternToggle("remove")})})}});return t.register(s),s}),function(e){function n(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}function r(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function i(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined,e.fn.ajaxSubmit=function(n){function T(t){var n=e.param(t).split("&"),r=n.length,i={},s,o;for(s=0;s<r;s++)n[s]=n[s].replace(/\+/g," "),o=n[s].split("="),i[decodeURIComponent(o[0])]=decodeURIComponent(o[1]);return i}function N(t){var i=new FormData;for(var s=0;s<t.length;s++)i.append(t[s].name,t[s].value);if(n.extraData){var o=T(n.extraData);for(var u in o)o.hasOwnProperty(u)&&i.append(u,o[u])}n.data=null;var a=e.extend(!0,{},e.ajaxSettings,n,{contentType:!1,processData:!1,cache:!1,type:r||"POST"});n.uploadProgress&&(a.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var t=0,r=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(r/i*100)),n.uploadProgress(e,r,i,t)}),e}),a.data=null;var f=a.beforeSend;return a.beforeSend=function(e,t){t.data=i,f&&f.call(this,e,t)},e.ajax(a)}function C(t){function T(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function k(){function o(){try{var e=T(d).readyState;i("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(o,50)}catch(t){i("Server abort: ",t," (",t.name,")"),_(x),b&&clearTimeout(b),b=undefined}}var t=u.attr("target"),n=u.attr("action");s.setAttribute("target",h),r||s.setAttribute("method","POST"),n!=f.url&&s.setAttribute("action",f.url),!f.skipEncodingOverride&&(!r||/post/i.test(r))&&u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),f.timeout&&(b=setTimeout(function(){y=!0,_(S)},f.timeout));var a=[];try{if(f.extraData)for(var l in f.extraData)f.extraData.hasOwnProperty(l)&&(e.isPlainObject(f.extraData[l])&&f.extraData[l].hasOwnProperty("name")&&f.extraData[l].hasOwnProperty("value")?a.push(e('<input type="hidden" name="'+f.extraData[l].name+'">').val(f.extraData[l].value).appendTo(s)[0]):a.push(e('<input type="hidden" name="'+l+'">').val(f.extraData[l]).appendTo(s)[0]));f.iframeTarget||(p.appendTo("body"),d.attachEvent?d.attachEvent("onload",_):d.addEventListener("load",_,!1)),setTimeout(o,15),s.submit()}finally{s.setAttribute("action",n),t?s.setAttribute("target",t):u.removeAttr("target"),e(a).remove()}}function _(t){if(v.aborted||M)return;try{A=T(d)}catch(n){i("cannot access response document: ",n),t=x}if(t===S&&v){v.abort("timeout"),E.reject(v,"timeout");return}if(t==x&&v){v.abort("server abort"),E.reject(v,"error","server abort");return}if(!A||A.location.href==f.iframeSrc)if(!y)return;d.detachEvent?d.detachEvent("onload",_):d.removeEventListener("load",_,!1);var r="success",s;try{if(y)throw"timeout";var o=f.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);i("isXml="+o);if(!o&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){i("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var u=A.body?A.body:A.documentElement;v.responseText=u?u.innerHTML:null,v.responseXML=A.XMLDocument?A.XMLDocument:A,o&&(f.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e]},u&&(v.status=Number(u.getAttribute("status"))||v.status,v.statusText=u.getAttribute("statusText")||v.statusText);var a=(f.dataType||"").toLowerCase(),l=/(json|script|text)/.test(a);if(l||f.textarea){var h=A.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(l){var m=A.getElementsByTagName("pre")[0],g=A.getElementsByTagName("body")[0];m?v.responseText=m.textContent?m.textContent:m.innerText:g&&(v.responseText=g.textContent?g.textContent:g.innerText)}}else a=="xml"&&!v.responseXML&&v.responseText&&(v.responseXML=D(v.responseText));try{L=H(v,a,f)}catch(t){r="parsererror",v.error=s=t||r}}catch(t){i("error caught: ",t),r="error",v.error=s=t||r}v.aborted&&(i("upload aborted"),r=null),v.status&&(r=v.status>=200&&v.status<300||v.status===304?"success":"error"),r==="success"?(f.success&&f.success.call(f.context,L,"success",v),E.resolve(v.responseText,"success",v),c&&e.event.trigger("ajaxSuccess",[v,f])):r&&(s===undefined&&(s=v.statusText),f.error&&f.error.call(f.context,v,r,s),E.reject(v,"error",s),c&&e.event.trigger("ajaxError",[v,f,s])),c&&e.event.trigger("ajaxComplete",[v,f]),c&&!--e.active&&e.event.trigger("ajaxStop"),f.complete&&f.complete.call(f.context,v,r),M=!0,f.timeout&&clearTimeout(b),setTimeout(function(){f.iframeTarget||p.remove(),v.responseXML=null},100)}var s=u[0],o,a,f,c,h,p,d,v,m,g,y,b,w=!!e.fn.prop,E=e.Deferred();if(e("[name=submit],[id=submit]",s).length)return alert('Error: Form elements must not have name or id of "submit".'),E.reject(),E;if(t)for(a=0;a<l.length;a++)o=e(l[a]),w?o.prop("disabled",!1):o.removeAttr("disabled");f=e.extend(!0,{},e.ajaxSettings,n),f.context=f.context||f,h="jqFormIO"+(new Date).getTime(),f.iframeTarget?(p=e(f.iframeTarget),g=p.attr("name"),g?h=g:p.attr("name",h)):(p=e('<iframe name="'+h+'" src="'+f.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),d=p[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1;try{d.contentWindow.document.execCommand&&d.contentWindow.document.execCommand("Stop")}catch(r){}p.attr("src",f.iframeSrc),v.error=n,f.error&&f.error.call(f.context,v,n,t),c&&e.event.trigger("ajaxError",[v,f,n]),f.complete&&f.complete.call(f.context,v,n)}},c=f.global,c&&0===e.active++&&e.event.trigger("ajaxStart"),c&&e.event.trigger("ajaxSend",[v,f]);if(f.beforeSend&&f.beforeSend.call(f.context,v,f)===!1)return f.global&&e.active--,E.reject(),E;if(v.aborted)return E.reject(),E;m=s.clk,m&&(g=m.name,g&&!m.disabled&&(f.extraData=f.extraData||{},f.extraData[g]=m.value,m.type=="image"&&(f.extraData[g+".x"]=s.clk_x,f.extraData[g+".y"]=s.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(f.extraData=f.extraData||{},f.extraData[C]=N),f.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var r,s,o,u=this;typeof n=="function"&&(n={success:n}),r=this.attr("method"),s=this.attr("action"),o=typeof s=="string"?e.trim(s):"",o=o||window.location.href||"",o&&(o=(o.match(/^([^#]+)/)||[])[1]),n=e.extend(!0,{url:o,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var a={};this.trigger("form-pre-serialize",[this,n,a]);if(a.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(n.beforeSerialize&&n.beforeSerialize(this,n)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=n.traditional;f===undefined&&(f=e.ajaxSettings.traditional);var l=[],c,h=this.formToArray(n.semantic,l);n.data&&(n.extraData=n.data,c=e.param(n.data,f));if(n.beforeSubmit&&n.beforeSubmit(h,this,n)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[h,this,n,a]);if(a.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=e.param(h,f);c&&(p=p?p+"&"+c:c),n.type.toUpperCase()=="GET"?(n.url+=(n.url.indexOf("?")>=0?"&":"?")+p,n.data=null):n.data=p;var d=[];n.resetForm&&d.push(function(){u.resetForm()}),n.clearForm&&d.push(function(){u.clearForm(n.includeHidden)});if(!n.dataType&&n.target){var v=n.success||function(){};d.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(v,arguments)})}else n.success&&d.push(n.success);n.success=function(e,t,r){var i=n.context||this;for(var s=0,o=d.length;s<o;s++)d[s].apply(i,[e,t,r||u,u])};var m=e('input[type=file]:enabled[value!=""]',this),g=m.length>0,y="multipart/form-data",b=u.attr("enctype")==y||u.attr("encoding")==y,w=t.fileapi&&t.formdata;i("fileAPI :"+w);var E=(g||b)&&!w,S;n.iframe!==!1&&(n.iframe||E)?n.closeKeepAlive?e.get(n.closeKeepAlive,function(){S=C(h)}):S=C(h):(g||b)&&w?S=N(h):S=e.ajax(n),u.removeData("jqxhr").data("jqxhr",S);for(var x=0;x<l.length;x++)l[x]=null;return this.trigger("form-submit-notify",[this,n]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var s={s:this.selector,c:this.context};return!e.isReady&&s.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(s.s,s.c).ajaxForm(t)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,n).on("click.form-plugin",this.selector,t,r),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,n).bind("click.form-plugin",t,r)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f)continue;if(n&&s.clk&&c.type=="image"){!c.disabled&&s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"&&!c.disabled){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone()):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("jquery-form",["jquery-form/jquery.form"],function(e){return e}),define("jquery-form/jquery.form",function(){}),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$backdrop.click(this.options.backdrop=="static"?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})}(window.jQuery),define("jam/bootstrap/js/bootstrap-modal",function(){}),define("js/plone.overlay",["jquery","js/patterns","js/jquery.iframe","jquery-form","jam/bootstrap/js/bootstrap-transition","jam/bootstrap/js/bootstrap-modal"],function(e,t,n,r,i,s,o){var u=t.Base.extend({name:"plone-overlay",jqueryPlugin:"ploneOverlay",defaults:{loadingText:"Loading ...",events:{},ajaxSubmitOptions:{timeout:5e3,timeoutText:'Requests timeouted! You wish to <a href="#" class="retry">retry</a> or <a href="#" class="close">close</a>',successError:".portalMessage.error",modalButtons:".modal-footer",contentButtons:'.formControls > input[type="submit"]'},modalOptions:{contentTitle:"h1.documentFirstHeading",contentBody:"#content",template:'<div class="modal fade"     data-pattern="plone-tabs"     data-plone-tabs-tabs-klass="nav nav-tabs"     data-plone-tabs-tab-klass=""     data-plone-tabs-panel-klass="">  <div class="modal-header">    <h3></h3>  </div>  <div class="modal-body"></div>  <div class="modal-footer"></div></div>',templateClose:'<a class="close" data-dismiss="modal">&times;</a>',templateTitle:".modal-header > h3",templateBody:".modal-body",templateFooter:".modal-footer"}},init:function(){var t=this;t.$el.jquery||(t.options=t.$el,t.$el=o),t.options=e.extend(!0,{},t.defaults,t.options),t.$el&&e.nodeName(t.$el[0],"a")&&(t.options.ajaxUrl||(t.options.ajaxUrl=t.$el.attr("href")),t.$el.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.show()})),t.options.modal?(t.$modal=e(t.options.modal).hide(),t.initModal(t.$modal)):t.options.ajaxUrl?t.$modal=t.prepareAjaxLoad(t.options.ajaxUrl):e.error("ploneOverlay can not recognize any content to use as $modal"),n.$el.on("iframe.click",function(n,r){r.which===1&&e(r.target).hasClass("modal-backdrop")&&t.hide()}),e(n.document).scroll(function(){if(t.$modal&&t.$modal.jquery){var r=t.$modal.parents(".modal-backdrop");r.size()!==0&&r.css({top:-1*e(n.document).scrollTop(),height:e(n.document).scrollTop()+r.height()})}}),t.initialTopFrameHeight=e(n.document).height()+e("body",n.document).offset().top},initOverlay:function(n){var r=this;r.options.events&&e.each(r.options.events,function(t){var i,s=t.split(" "),o=s[0],u=e(s.splice(1).join(" "),n);typeof r.options.events[t]=="function"?i=r.options.events[t]:u.size()!==0&&(u.parents("form").size()!==0?i=r.prepareAjaxSubmit(u,n,r.options.events[t]):r.startsWithOverlayUrl(u)&&(i=r.prepareNewModal(u,n,r.options.events[t]))),u.on(o,function(e){i&&(e.stopPropagation(),e.preventDefault(),i(r,u,n))})}),t.initialize(r.$modal),e('[data-pattern~="tabs"] > li > a',r.$modal).on("shown",function(){r.resizeModal(r.$modal)})},initModal:function(e){var t=this;e.parents("body").size()===0&&e.appendTo("body"),e.modal({backdrop:"static",dynamic:!0,keyboard:!1,show:!1}),e.on("click",function(e){e.stopPropagation()}),t.initOverlay(e),t.options.onInitModal&&t.options.onModalIniu.call(t)},resizeModal:function(t){var r=this,i=r.$modal.height()+r.$modal.offset().top;n&&i>r.initialTopFrameHeight&&(e("body",n.document).height(i),r.$modal.parents(".modal-backdrop").height(e(n.window).height()))},prepareAjaxLoad:function(t){var n=this;return function(t){n.$modal=n.modalTemplate(n.options.loadingTemplate||e('<div>  <div id="content">    <h1 class="documentFirstHeading">'+n.options.loadingText+"</h1>"+'    <div class="progress progress-striped active">'+'      <div class="bar" style="width: 100%;"></div>'+"    </div>"+"  </div>"+"</div>")),n.initModal(n.$modal.hide()),n.show(),n.resizeModal(n.$modal),n.options.onBeforeLoad&&n.options.onBeforeLoad.call(n),n.$el&&n.$el.trigger("plone.overlay.beforeLoad",[n]);var r=n.changeAjaxURL(r||n.options.ajaxUrl);e.get(r,{},function(r){var i=e(/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(r)[0].replace("<body","<div").replace("</body>","</div>"));n.$modal.html(""),n.$modal.append(e("> *",n.modalTemplate(i))),n.initOverlay(n.$modal),n.resizeModal(n.$modal),n.options.onLoaded&&n.options.onLoaded.call(n),n.$el&&n.$el.trigger("plone.overlay.loaded",[n]),t&&t.call(n)},"html")}},modalTemplate:function(t,n){var r=this;n=e.extend(r.options.modalOptions,n||{});var i=e(n.template),s=e(n.templateTitle,i),o=e(n.templateBody,i),u=e(n.templateFooter,i);return n.contentBody&&o.html(e(n.contentBody,t).html()),n.contentTitle&&(s.html(e(n.contentTitle,t).html()),e(n.contentTitle,o).remove()),n.contentFooter&&(o.html(e(n.contentFooter,t).html()),e(n.contentFooter,o).remove()),n.templateClose&&n.templateClose.length!==0&&e(n.templateClose).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),r.hide()}).insertBefore(s),r.options.modalTemplate&&(i=r.options.modalTemplate(i)),i},prepareNewModal:function(e,t,n){console.log("TODO: prepareNewModal")},prepareAjaxSubmit:function(r,i,s){var o=this;return s=e.extend({},o.options.ajaxSubmitOptions,s),e(s.contentButtons,i).each(function(){var t=e(this);t.clone().appendTo(e(s.modalButtons,i)).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),t.trigger("click")}),t.hide()}),function(i,o,u){var a=e.extend({},s,a);typeof a.contentFilters=="string"&&(a.contentFilters=[a.contentFilters]);var f={};f[o.attr("name")]=o.attr("value"),u.append(e("<div/>").css({position:"absolute",top:e(e("> *",u)[0]).outerHeight(),left:0,width:u.width(),height:e(e("> *",u)[1]).outerHeight()+e(e("> *",u)[2]).outerHeight(),background:"white",opacity:"0.6"})).append(e('<div class="progress progress-striped active">  <div class="bar" style="width: 100%;"></div></div>').css({position:"absolute",left:u.width()*.1,top:(e(e("> *",u)[1]).outerHeight()+e(e("> *",u)[2]).outerHeight())*.45,width:u.width()*.8})),r.parents("form").ajaxSubmit(e.extend(!0,{timeout:a.timeout,dataType:"html",url:i.changeAjaxURL(r.parents("form").attr("action")),error:function(t,n,r){if(n==="timeout")if(a.onTimeout)a.onTimeout.apply(i,[t,r]);else{var s=e("<p/>").html(a.timeoutText);e("a.retry",s).on("click",function(e){e.stopPropagation(),e.preventDefault(),i.show()}),e("a.close",s).on("click",function(e){e.stopPropagation(),e.preventDefault(),i.hide()}),e(".progress",u).removeClass("progress-striped").addClass("progress-danger").after(s)}else a.onError?a.onError.apply(i,[t,n,r]):i.hide()},success:function(r,s,o,u){var f=n?n.document:document,l=e(/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(r)[0].replace("<body","<div").replace("</body>","</div>"));e(a.successError,l).size()!==0?(i.$modal.html(""),i.$modal.append(e("> *",i.modalTemplate(l))),i.initModalEvents(i.$modal),t&&(t.initialize(i.$modal),e('[data-pattern~="tabs"] > li > a',i.$modal).on("shown",function(){i.resizeModal(i.$modal)})),a.onSuccessError&&a.onSuccessError.apply(i,[l,s,o,u])):a.onSuccess?a.onSuccess.apply(i,[l,s,o,u]):a.contentFilters&&(e.each(a.contentFilters,function(t,n){e(n,f).html(e(n,l).html())}),i.hide())}},{data:f}))}},changeAjaxURL:function(t){var r=this,i=r.options.ajaxUrlPrefix===o?"/++toolbar++":r.options.ajaxUrlPrefix,s=r.options.portalUrl||e("body",n.document).data("portal-navigation-url")||"";return t.indexOf("http")===0?s+i+t.substr(s.length):t.substr(0,1)==="/"?s+i+t:s+i+(window.location.href+"/"+t).substr(s.length)},show:function(){var t=this;if(t.is_shown===!0)return;t.is_shown=!0,e(".toolbar-dropdown-open > a").patternToggle("remove"),typeof t.$modal=="function"?t.$modal(t._show):t._show()},_show:function(){var e=this;n.stretch(),e.options.onShow&&e.options.onShow.call(e),e.$el&&e.$el.trigger("plone.overlay.show",[e]),e.$modal.modal("show"),e.options.onShown&&e.options.onShown.call(e),e.$el&&e.$el.trigger("plone.overlay.shown",[e])},hide:function(){var t=this;if(t.is_shown!==!0)return;if(typeof t.$modal=="function")return;t.is_shown=!1,t.options.onHide&&t.options.onHide.call(t),t.$el&&t.$el.trigger("plone.overlay.hide",[t]),t.$modal.modal("hide"),t.$modal.remove(),n.shrink(),e("body",n.document).height(t.initialTopFrameHeight),t.$el&&t.$el.off().data("plone-overlay",new u(t.$el,t.options)),t.options.onHidden&&t.options.onHidden.call(t),t.$el&&t.$el.trigger("plone.overlay.hidden")},getBaseURL:function(t){return e(/<base[^>]*>((.|[\n\r])*)<\/base>/im.exec(t)[0]).attr("href")}});return t.register(u),u}),define("js/plone.cmsui",["jquery","js/patterns","js/plone.overlay"],function(e,t,n,r){var i=e.ploneCMSUIOptions||{};e(document).ready(function(){e("#plone-toolbar #plone-action-edit > a").ploneOverlay(e.extend(i,{events:{'click .modal-body input[name="form.button.cancel"]':{},'click .modal-body input[name="form.button.save"]':{contentFilters:["#portal-column-content"]}}})),e("#plone-toolbar #plone-action-contentrules > a").ploneOverlay(e.extend(i,{})),e("#plone-toolbar #plone-action-local_roles > a").ploneOverlay(e.extend(i,{modalTemplate:function(t){return e("#link-presentation",t).remove(),t},ajaxSubmitOptions:{contentButtons:'input[name="form.button.Save"],input[name="form.button.Cancel"]'},events:{'click .modal-body input[name="form.button.Search"]':{onSuccess:function(n){var r=this;r.$modal.html(""),r.$modal.append(e("> *",r.modalTemplate(n))),r.initModalEvents(r.$modal),t.initialize(r.$modal),e('[data-pattern~="tabs"] > li > a',r.$modal).on("shown",function(){r.resizeModal(r.$modal)})}},'click .modal-body input[name="form.button.Cancel"]':{},'click .modal-body input[name="form.button.Save"]':{}}})),e("#plone-toolbar #plone-contentmenu-actions > ul > li#plone-contentmenu-actions-delete > a").ploneOverlay(e.extend(i,{events:{'click .modal-body input[name="form.button.Cancel"]':{},"click .modal-body input.destructive":{onSuccess:function(e,t,n){window.parent.location.href=window.parent.location.href+"/.."}}}})),e("#plone-toolbar #plone-contentmenu-actions > ul > li#plone-contentmenu-actions-rename > a").ploneOverlay(e.extend(i,{events:{'click .modal-body input[name="form.button.Cancel"]':{},'click .modal-body input[name="form.button.RenameAll"]':{onSuccess:function(e,t,n){window.parent.location.href=e.data("context-url")||window.parent.location.href}}}})),e("#plone-toolbar #plone-contentmenu-display > ul > li#folderChangeDefaultPage > a,#plone-toolbar #plone-contentmenu-display > ul > li#contextSetDefaultPage > a").ploneOverlay(e.extend(i,{modalTemplate:function(t){return e("form > dl",t).addClass("default-page-listing"),e('input[name="form.button.Cancel"]',t).attr("class","standalone"),t},events:{'click .modal-body input[name="form.button.Cancel"]':{},'click .modal-body input[name="form.button.Save"]':{onSuccess:function(e,t,n){window.parent.location.href=window.parent.location.href}}}})),e("#plone-toolbar #plone-contentmenu-factories > ul > li:not(#plone-contentmenu-settings) > a").ploneOverlay(e.extend(i,{events:{'click .modal-body input[name="form.button.cancel"]':{},'click .modal-body input[name="form.button.save"]':{onSuccess:function(e,t,n){window.parent.location.href=e.data("context-url")||window.parent.location.href}}}}));var n=e.extend(i,{modalTemplate:function(t){function r(t){e("#mode_enable",t).is(":checked")?n.attr({id:"details",style:""}):n.attr({id:"details",style:"display:none;"})}function i(t,n){var r=e("#"+n,t),i=e("#"+n+"_allowed",t),s=e("#"+n+"_allowed_hidden",t);r.is(":checked")?i.attr("disabled",!1):(i.attr("checked",!1),i.attr("disabled",!0))}var n=e("#details",t).removeAttr("style").removeAttr("id").first().parent();return e('input[name="constrainTypesMode:int"]',t).removeAttr("onclick").on("click",function(){r(e(this).parents(".modal"))}),e('input[name="currentPrefer:list"],input[name="currentAllow:list"]',t).removeAttr("onclick").on("click",function(){i(e(this).parents(".modal"),e(this).attr("id"))}),r(t),t},events:{'click .modal-body input[name="form.button.Cancel"]':{},'click .modal-body input[name="form.button.Save"]':{onSuccess:function(r,i,s){var o=this;e("#plone-contentmenu-factories").html(e("#plone-contentmenu-factories",r).html()),t.initialize(e("#plone-contentmenu-factories")),e("#plone-toolbar #plone-contentmenu-factories > ul > li#plone-contentmenu-settings > a").ploneOverlay(n),o.hide()}}}});e("#plone-toolbar #plone-contentmenu-factories > ul > li#plone-contentmenu-settings > a").ploneOverlay(n),e("#plone-toolbar #plone-contentmenu-workflow > ul > li#workflow-transition-advanced > a").ploneOverlay(e.extend(i,{modalTemplate:function(t){return e("#workflow_action",t).parent().find("> br").remove(),t},events:{'click .modal-body input[name="form.button.Cancel"]':{},'click .modal-body input[name="form.button.Publish"]':{}}}))})}),jQuery&&define("jquery",[],function(){return jQuery}),define("js/toolbar",["jquery","js/patterns","js/widgets","js/plone.toolbar","js/plone.cmsui"],function(e,t){e(document).ready(function(){t.initialize(e(document))})});